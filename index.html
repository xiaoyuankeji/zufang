<!DOCTYPE html>
<html lang="zh-CN">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?4e65132b1622a5c233d1739c03597848";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>
        
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡Œå°”ç§Ÿæˆ¿ |Lille studio| lierzufang | Location Appartement Lille | Apartments for Rent</title>
    <meta name="description" content="é‡Œå°”ç•™å­¦ç¬¬ä¸€ç«™ï¼šæˆ¿ä¸œç›´ç§Ÿæ— ä¸­ä»‹è´¹ï¼Œé™„é€2026æ–°ç”Ÿé¿å‘æŒ‡å—ã€æ±‡æ¬¾ä¼˜æƒ ã€å…è´¹ç”µè¯å¡é¢†å–æ”»ç•¥ã€‚">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #F3F4F6; min-height: 100vh; }
        #root { min-height: 100vh; display: block; }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-text {
            background: linear-gradient(135deg, #2563EB, #DB2777);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <!-- é˜²å‘†ï¼šfile:// æ‰“å¼€ä¼šå¯¼è‡´æ¥å£è¯·æ±‚å¤±è´¥/è·³è½¬è·¯å¾„å¼‚å¸¸ -->
    <div id="protocol-warning" style="display:none; padding:16px; background:#FEF3C7; border-bottom:1px solid #F59E0B; color:#92400E; font-weight:700;">
        æ£€æµ‹åˆ°ä½ æ­£åœ¨ç”¨ <code>file://</code> æ–¹å¼æ‰“å¼€é¡µé¢ï¼ˆä¼šå¯¼è‡´æ¥å£è¯·æ±‚å¤±è´¥ï¼‰ã€‚è¯·ç”¨æœ¬åœ°æœåŠ¡å™¨è®¿é—®ï¼š
        <a href="http://localhost:3000/index.html" style="text-decoration:underline; font-weight:900;">http://localhost:3000/index.html</a>
        <button id="open-local-btn" style="margin-left:12px; padding:6px 10px; border:1px solid #F59E0B; background:#fff; border-radius:8px; cursor:pointer; font-weight:900;">
          ä¸€é”®æ‰“å¼€
        </button>
    </div>
    <script>
      (function () {
        try {
          if (location.protocol === 'file:') {
            var el = document.getElementById('protocol-warning');
            if (el) el.style.display = 'block';
            var btn = document.getElementById('open-local-btn');
            if (btn) {
              btn.addEventListener('click', function () {
                window.location.href = 'http://localhost:3000/index.html';
              });
            }
            // è‡ªåŠ¨è·³è½¬ï¼ˆé¿å…ç”¨æˆ·æ€»æ˜¯åŒå‡»æ–‡ä»¶å¯¼è‡´è¯¦æƒ…é¡µè·¯å¾„å¼‚å¸¸ï¼‰
            setTimeout(function () {
              try { window.location.href = 'http://localhost:3000/index.html'; } catch (e) {}
            }, 800);
          }
        } catch (e) {}
      })();
    </script>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const API_BASE = "http://127.0.0.1:3001/api/v1";


        // Lucide Web ç‰ˆï¼ˆhttps://unpkg.com/lucide@latestï¼‰å¯¼å‡ºçš„æ˜¯â€œå›¾æ ‡å¯¹è±¡â€ï¼Œä¸æ˜¯ React ç»„ä»¶ã€‚
        // è¿™é‡Œåšä¸€ä¸ª React åŒ…è£…ï¼šæŠŠå›¾æ ‡å¯¹è±¡è½¬æˆçœŸå® SVG DOMï¼Œé¿å… React æŠ¥ â€œElement type is invalidâ€ã€‚
        const toKebabCase = (s) => String(s)
            .replace(/([a-z0-9])([A-Z])/g, '$1-$2')
            .replace(/[\s_]+/g, '-')
            .toLowerCase();

        const toPascalCase = (s) => {
            const parts = String(s).split(/[-_\s]+/g).filter(Boolean);
            return parts.map(p => p.charAt(0).toUpperCase() + p.slice(1)).join('');
        };

        const resolveLucideIconDef = (name) => {
            if (!name || typeof lucide === 'undefined') return null;
            const kebab = toKebabCase(name);
            const pascal = toPascalCase(name);

            const keys = [
                name,
                kebab,
                pascal,
                String(name).replace(/[-_\s]+/g, ''),
            ];

            for (const k of keys) {
                if (lucide?.icons?.[k]) return lucide.icons[k];
                if (lucide?.[k]) return lucide[k];
            }
            return null;
        };

        const LucideIcon = ({ name, size = 24, className = '' }) => {
            const ref = useRef(null);

            useEffect(() => {
                const el = ref.current;
                if (!el) return;
                el.innerHTML = '';

                if (typeof lucide?.createElement !== 'function') return;

                const attrs = {
                    width: size,
                    height: size,
                    class: className,
                };

                let svg = null;
                // ä¼˜å…ˆæŒ‰â€œiconName å­—ç¬¦ä¸²â€çš„ç­¾ååˆ›å»ºï¼ˆæ›´å¸¸è§ï¼‰
                try {
                    svg = lucide.createElement(toKebabCase(name), attrs);
                } catch (e) {
                    svg = null;
                }

                // å…¼å®¹æŸäº›æ„å»ºï¼šcreateElement(iconDef, attrs)
                if (!svg) {
                    const iconDef = resolveLucideIconDef(name);
                    try {
                        if (iconDef) svg = lucide.createElement(iconDef, attrs);
                    } catch (e) {
                        svg = null;
                    }
                }

                // æ ¹æ®è¿”å›å€¼ç±»å‹æ¸²æŸ“
                if (typeof svg === 'string') {
                    el.innerHTML = svg;
                    return;
                }
                if (svg && typeof svg === 'object') {
                    if (svg.nodeType) {
                        el.appendChild(svg);
                        return;
                    }
                    // æŸäº›å®ç°å¯èƒ½åŒ…ä¸€å±‚
                    if (svg.el && svg.el.nodeType) {
                        el.appendChild(svg.el);
                        return;
                    }
                }
            }, [name, size, className]);

            return <span ref={ref} aria-hidden="true" className={`inline-flex leading-none ${className}`} />;
        };

        // --- æ•°æ®å¸¸é‡ ---
        const AFFILIATE_LINKS = {
            remit: "https://p.pandaremit.com/h5activity/launchInvitationCode?countryCode=FRA&shareCode=OFJLVFBI&lang=zh-hans",
            sim: "https://airalo.pxf.io/9LN9d0",
            vpn: "https://getmalus.com/buy?affid=undefined",
            hotel: "https://www.booking.com/index.html?aid=YOUR_CODE"
        };

        // çº¯çœŸæ•°æ®æ¨¡å¼ï¼šåˆå§‹ä¸ºç©ºï¼Œå¼ºåˆ¶ä» API åŠ è½½
        const RENTAL_DATA = [];

        const GUIDE_DATA = [
            { category: "è¡Œå‰å‡†å¤‡", icon: "briefcase", title: "2026 æœ€æ–°ç­¾è¯ææ–™æ¸…å•", content: "é™¤å¸¸è§„ææ–™å¤–ï¼Œä»Šå¹´ OFII è¡¨æ ¼å·²ç”µå­åŒ–ã€‚åŠ¡å¿…å‡†å¤‡å‡ºç”Ÿå…¬è¯åŒè®¤è¯ï¼ˆCAFæˆ¿è¡¥å¿…å¤‡ï¼‰ï¼Œå»ºè®®åœ¨å›½å†…å¤šå°å‡ ä»½æŠ¤ç…§å¤å°ä»¶ã€‚" },
            { category: "äº¤é€šå‡ºè¡Œ", icon: "train", title: "Ilevia åœ°é“å¡åŠç†æ”»ç•¥", content: "26å²ä»¥ä¸‹å­¦ç”Ÿå¯äº«å—åŠä»·ä¼˜æƒ ï¼ˆçº¦ â‚¬29/æœˆï¼‰ã€‚åŠç†éœ€å¸¦ä¸Šå­¦æ ¡æ³¨å†Œè¯æ˜å’ŒæŠ¤ç…§ã€‚Gare Lille Flandres åœ°é“ç«™äººå·¥æŸœå°å¯ç°åœºå–å¡ã€‚" },
            { category: "ç”Ÿæ´»é¿å‘", icon: "shield-alert", title: "é‡Œå°”å®‰å…¨é»‘ç™½æ¦œ", content: "å°½é‡é¿å…ä½åœ¨ Lille Sud æ·±å¤„å’Œ Wazemmes åœ°é“ç«™å‘¨è¾¹çš„å°å··å­ï¼Œå°¤å…¶æ˜¯æ™šä¸Šã€‚Vieux Lille å’Œ Vauban æ²»å®‰ç›¸å¯¹è¾ƒå¥½ï¼Œä½†æˆ¿ç§Ÿç¨è´µã€‚" },
            { category: "é“¶è¡Œå¼€æˆ·", icon: "credit-card", title: "æ³•å›½é“¶è¡Œå¡é€‰æ‹©æŒ‡å—", content: "ä¼ ç»Ÿé“¶è¡Œï¼ˆBNP, LCLï¼‰ç½‘ç‚¹å¤šä½†æ‰‹ç»­è´¹é«˜ï¼Œä¸”è§£çº¦éº»çƒ¦ã€‚æ¨èä½œä¸ºä¸»å¡ã€‚ç½‘é“¶ï¼ˆRevolut, N26ï¼‰å¼€æˆ·å¿«ã€æ±‡ç‡å¥½ï¼Œé€‚åˆæ—¥å¸¸æ¶ˆè´¹å’Œæ—…æ¸¸ã€‚" },
            { category: "ä½æˆ¿è¡¥è´´", icon: "home", title: "CAF æˆ¿è¡¥ç”³è¯·å…¨æµç¨‹", content: "æ‹¿åˆ°ä½æˆ¿åˆåŒåç«‹å³ç”³è¯·ã€‚ç¬¬ä¸€æœˆé€šå¸¸ä¸å‘é’±ã€‚éœ€è¦å‡ºç”Ÿå…¬è¯åŒè®¤è¯ã€‚åˆç§Ÿæˆ¿è¡¥é€šå¸¸æ¯”å•äººä½å°‘ä¸€ç‚¹ã€‚" },
            { category: "åŒ»ç–—å¥åº·", icon: "heart-pulse", title: "ç”Ÿç—…äº†æ€ä¹ˆåŠï¼Ÿ", content: "æ³¨å†Œ Ameli åŒ»ä¿å¡ï¼ŒæŠ¥é”€70%ã€‚å‰©ä½™30%å»ºè®®ä¹° Mutuelle è¡¥å……é™©ã€‚Doctolib æ˜¯æ³•å›½é€šç”¨çš„é¢„çº¦åŒ»ç”Ÿ Appï¼Œç±»ä¼¼äºå›½å†…çš„æŒ‚å·å¹³å°ã€‚" },
        ];

        const WELFARE_DATA = [
            { icon: "banknote", title: "å­¦è´¹/æˆ¿ç§Ÿæ±‡æ¬¾ç¥å™¨", desc: "ç†ŠçŒ«é€Ÿæ±‡ï¼šä¸ç”¨è·‘é“¶è¡Œå¡«å•ï¼æ”¯æŒæ”¯ä»˜å®/å¾®ä¿¡ä¸€é”®æ±‡æ¬¾æ¬§æ´²ï¼Œä¸­æ–‡å®¢æœï¼Œæœ€å¿«2åˆ†é’Ÿåˆ°è´¦ã€‚", link: AFFILIATE_LINKS.remit, btnText: "é¢†å–ä¼˜æƒ ", tag: "ç«‹çœÂ¥200+", color: "bg-blue-600" },
            { icon: "smartphone", title: "å…è´¹é¢†å–æ¬§æ´²ç”µè¯å¡", desc: "Airaloï¼šå‘Šåˆ«å®ä½“å¡ç­‰å¾…ã€‚å›½å†…åœ¨çº¿å¼€é€šï¼Œè½åœ°æ³•å›½è‡ªåŠ¨è¿ç½‘ï¼Œä½è‡³ $4.5 èµ·æ•‘æ€¥é¦–é€‰ã€‚", link: AFFILIATE_LINKS.sim, btnText: "å…è´¹ç”³é¢†", tag: "å›½å†…åŒ…é‚®", color: "bg-yellow-500" },
            { icon: "wifi", title: "å›å›½åŠ é€Ÿ/è¿½å‰§å¿…å¤‡", desc: "å¿ä¸ä½é‚€è¯·ä½ ä½¿ç”¨æè‡´å¥½ç”¨çš„ Malus æµ·å¤–å›å›½åŠ é€Ÿå™¨ï¼Œçœ‹Bilibiliã€ä¼˜é…·ã€çˆ±å¥‡è‰ºã€è…¾è®¯è§†é¢‘ç­‰å›½å†…æœåŠ¡ä¸å¡é¡¿ï¼ŒåŠ é€Ÿå…¨çƒæ¸¸æˆè½»è½»æ¾æ¾ã€‚ç”¨æˆ‘çš„é“¾æ¥æ³¨å†Œè´­ä¹°ï¼Œè¿˜å¯ä»¥è·å¾— 3 å¤© VIP ä¼šå‘˜", link: AFFILIATE_LINKS.vpn, btnText: "è·å–æŠ˜æ‰£", tag: "ç‹¬å®¶3æŠ˜", color: "bg-indigo-600" },
            { icon: "book-open", title: "æ•™æ/äºŒæ‰‹äº¤æ˜“ç¾¤", desc: "åŠ å…¥é‡Œå°”äºŒæ‰‹ç¾¤ï¼Œä½ä»·æ”¶å­¦é•¿å­¦å§çš„æ•™æå’Œå®¶å…·ã€‚", link: "#", btnText: "æ‰«ç è¿›ç¾¤", tag: "çœé’±å¿…çœ‹", color: "bg-green-600" },
        ];

        // --- åŸºç¡€ç»„ä»¶ ---

        const Navbar = ({ activeTab, setActiveTab, toggleMenu, isMenuOpen }) => (
            <nav className="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100">
                <div className="max-w-6xl mx-auto px-4">
                    <div className="flex justify-between items-center h-16">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setActiveTab('home')}>
                            <div className="bg-blue-600 text-white p-1.5 rounded-lg">
                                <LucideIcon name="home" size={20} className="text-white" />
                            </div>
                            <span className="text-xl font-bold text-gray-800 tracking-tight">
                                é‡Œå°”ç§Ÿæˆ¿<span className="text-blue-600">.com</span>
                            </span>
                        </div>

                        <div className="hidden md:flex space-x-8">
                            <NavItem label="é¦–é¡µ" active={activeTab === 'home'} onClick={() => setActiveTab('home')} />
                            <NavItem label="æ–°ç”Ÿç¦åˆ©" active={activeTab === 'welfare'} onClick={() => setActiveTab('welfare')} highlight />
                            <NavItem label="é¿å‘æŒ‡å—" active={activeTab === 'guide'} onClick={() => setActiveTab('guide')} />
                            <NavItem label="ç²¾é€‰æˆ¿æº" active={activeTab === 'rentals'} onClick={() => setActiveTab('rentals')} />
                        </div>

                        <div className="md:hidden flex items-center">
                            <button onClick={toggleMenu} className="text-gray-600 focus:outline-none">
                                {isMenuOpen
                                    ? <LucideIcon name="x" size={24} className="text-gray-600" />
                                    : <LucideIcon name="menu" size={24} className="text-gray-600" />
                                }
                            </button>
                        </div>
                    </div>
                </div>

                {isMenuOpen && (
                    <div className="md:hidden bg-white border-t border-gray-100 animate-fade-in-down">
                        <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                            <MobileNavItem label="é¦–é¡µ" onClick={() => { setActiveTab('home'); toggleMenu(); }} />
                            <MobileNavItem label="æ–°ç”Ÿç¦åˆ©" onClick={() => { setActiveTab('welfare'); toggleMenu(); }} highlight />
                            <MobileNavItem label="é¿å‘æŒ‡å—" onClick={() => { setActiveTab('guide'); toggleMenu(); }} />
                            <MobileNavItem label="ç²¾é€‰æˆ¿æº" onClick={() => { setActiveTab('rentals'); toggleMenu(); }} />
                        </div>
                    </div>
                )}
            </nav>
        );

        const NavItem = ({ label, active, onClick, highlight }) => (
            <button 
                onClick={onClick}
                className={`font-medium transition-colors duration-200 ${
                    active ? 'text-blue-600' : 'text-gray-600 hover:text-blue-500'
                } ${highlight ? 'text-red-500 font-bold flex items-center gap-1' : ''}`}
            >
                {highlight && <LucideIcon name="gift" size={16} className="text-red-500" />}
                {label}
            </button>
        );

        const MobileNavItem = ({ label, onClick, highlight }) => (
            <button 
                onClick={onClick}
                className={`block w-full text-left px-3 py-3 rounded-md text-base font-medium ${
                    highlight ? 'bg-red-50 text-red-600' : 'text-gray-700 hover:bg-gray-50'
                }`}
            >
                {label}
            </button>
        );

        // --- ç»„ä»¶ï¼šäºŒç»´ç å¼¹çª— ---
        const WeChatModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">
                    {/* Backdrop */}
                    <div 
                        className="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity"
                        onClick={onClose}
                    ></div>
                    
                    {/* Modal Content */}
                    <div className="relative bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 animate-fade-in-up transform transition-all scale-100">
                        <button 
                            onClick={onClose}
                            className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors"
                        >
                            <LucideIcon name="x" size={24} />
                        </button>

                        <div className="text-center">
                            <h3 className="text-xl font-bold text-gray-800 mb-2">æ‰«ä¸€æ‰« å¾®ä¿¡å’¨è¯¢</h3>
                            <p className="text-gray-500 text-sm mb-6">åŠ å…¥æ–°ç”Ÿç¾¤ / å’¨è¯¢æˆ¿æº / é¢†å–ç¦åˆ©</p>
                            
                            <div className="bg-gray-50 p-4 rounded-xl border border-gray-100 inline-block mb-4">
                                <img 
                                    src="./image/erweima.png" 
                                    alt="é‡Œå°”ç§Ÿæˆ¿å¾®ä¿¡äºŒç»´ç " 
                                    className="w-48 h-48 object-contain mx-auto"
                                    onError={(e) => {
                                        // å¤‡ç”¨æ–¹æ¡ˆï¼šé˜²æ­¢æ–‡ä»¶åå¤§å°å†™é—®é¢˜
                                        if (!e.target.dataset.tried) {
                                            e.target.dataset.tried = "true";
                                            // æœ‰äº›ç³»ç»Ÿå¯èƒ½å¯¹ä¸­æ–‡/æ‹¼éŸ³æ•æ„Ÿï¼Œè¿™é‡Œä¸åšé¢å¤– fallback äº†ï¼Œç›´æ¥æŠ¥é”™
                                            console.error("äºŒç»´ç åŠ è½½å¤±è´¥ï¼Œè¯·ç¡®è®¤ image æ–‡ä»¶å¤¹ä¸‹æœ‰ erweima.png");
                                            e.target.src = "https://via.placeholder.com/200?text=QRCode+Missing";
                                        }
                                    }}
                                />
                            </div>
                            
                            <p className="text-xs text-gray-400">è¯·ä¿å­˜å›¾ç‰‡æˆ–ç›´æ¥æ‰«ç æ·»åŠ </p>
                            <button 
                                onClick={onClose}
                                className="mt-6 w-full py-3 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition-colors"
                            >
                                å…³é—­
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- ç»„ä»¶ï¼šç¦åˆ©å¡ç‰‡ (æ ¸å¿ƒèµšé’±æ¨¡å—) ---
        const WelfareCard = ({ iconName, title, desc, tag, color, link, btnText, onAction }) => {
            const isAction = link === '#' || !link;
            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative overflow-hidden group h-full flex flex-col">
                    <div className={`absolute top-0 right-0 ${color} text-white text-xs font-bold px-3 py-1 rounded-bl-xl`}>
                        {tag}
                    </div>
                    <div className={`w-12 h-12 rounded-full ${color.replace('bg-', 'bg-opacity-10 bg-')} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`}>
                        <LucideIcon name={iconName} size={24} className={color.replace('bg-', 'text-')} />
                    </div>
                    <h3 className="text-lg font-bold text-gray-800 mb-2">{title}</h3>
                    <p className="text-gray-500 text-sm mb-6 leading-relaxed flex-grow">{desc}</p>
                    
                    {isAction ? (
                        <button onClick={onAction} className={`mt-4 block w-full text-center py-2.5 rounded-xl font-bold text-white ${color} shadow-lg hover:brightness-110 transition-all active:scale-95`}>
                            {btnText} <LucideIcon name="qr-code" size={16} className="inline ml-1" />
                        </button>
                    ) : (
                        <a href={link} target="_blank" className={`mt-4 block w-full text-center py-2.5 rounded-xl font-bold text-white ${color} shadow-lg hover:brightness-110 transition-all active:scale-95`}>
                            {btnText} <LucideIcon name="arrow-right" size={16} className="inline ml-1" />
                        </a>
                    )}
                </div>
            );
        };

        // --- ç»„ä»¶ï¼šæˆ¿æºå¡ç‰‡ ---
        const RentalCard = ({ id, image, title, price, location, tags }) => (
            <a href={`/listing?id=${encodeURIComponent(id)}`} target="_blank" className="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 flex flex-col h-full group">
                <div className="relative h-48 flex-shrink-0 overflow-hidden">
                    {image ? (
                        <img src={image} alt={title} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                    ) : (
                        <div className="w-full h-full bg-gray-100 flex items-center justify-center text-gray-400 text-sm">
                            æš‚æ— å›¾ç‰‡
                        </div>
                    )}
                    <div className="absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded-md flex items-center gap-1">
                        <LucideIcon name="map-pin" size={12} className="text-white" /> {location}
                    </div>
                </div>
                <div className="p-5 flex flex-col flex-grow">
                    <div className="flex justify-between items-start mb-2">
                        <h3 className="text-lg font-bold text-gray-800 line-clamp-1">{title}</h3>
                        <span className="text-blue-600 font-bold text-lg">â‚¬{price}<span className="text-xs text-gray-500">/æœˆ</span></span>
                    </div>
                    <div className="flex flex-wrap gap-2 mb-4 flex-grow content-start">
                        {tags.map((tag, i) => (
                            <span key={i} className="px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-md">{tag}</span>
                        ))}
                    </div>
                    <div className="w-full py-2 border border-blue-600 text-blue-600 font-medium rounded-xl hover:bg-blue-50 transition-colors mt-auto text-center">
                        æŸ¥çœ‹è¯¦æƒ… (å«è”ç³»æ–¹å¼)
                    </div>
                </div>
            </a>
        );

        // --- ç»„ä»¶ï¼šæŒ‡å—å¡ç‰‡ ---
        const GuideCard = ({ icon, category, title, content }) => (
            <div className="bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                <div className="flex items-center gap-3 mb-3">
                    <div className="bg-blue-50 p-2 rounded-lg text-blue-600">
                        <LucideIcon name={icon} size={20} />
                    </div>
                    <span className="text-xs font-bold text-blue-500 uppercase tracking-wider">{category}</span>
                </div>
                <h3 className="text-lg font-bold text-gray-800 mb-2">{title}</h3>
                <p className="text-gray-600 text-sm leading-relaxed">{content}</p>
            </div>
        );

        // --- ç»„ä»¶ï¼šæ¸…å•é¡¹ ---
        const ChecklistItem = ({ text }) => {
            const [checked, setChecked] = useState(false);
            return (
                <div 
                    onClick={() => setChecked(!checked)}
                    className={`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all ${checked ? 'bg-green-50' : 'bg-gray-50 hover:bg-gray-100'}`}
                >
                    {checked
                        ? <LucideIcon name="check-circle-2" size={20} className="text-green-500" />
                        : <LucideIcon name="circle" size={20} className="text-gray-400" />
                    }
                    <span className={`${checked ? 'text-gray-400 line-through' : 'text-gray-700'}`}>{text}</span>
                </div>
            );
        };

        // --- é¡µé¢è§†å›¾ç»„ä»¶ ---

        const HomeView = ({ setActiveTab, openQR, rentalData, rentalLoading, rentalError }) => (
            <>
                {/* Hero Section */}
                <div className="pt-24 pb-12 px-4 bg-gradient-to-b from-blue-50 to-white">
                    <div className="max-w-4xl mx-auto text-center">
                        <span className="inline-block py-1 px-3 rounded-full bg-blue-100 text-blue-600 text-xs font-bold mb-4">
                            ğŸ‡«ğŸ‡· æˆ¿ä¸œç›´è¥ Â· æ— ä¸­ä»‹è´¹ Â· ç•™å­¦ç”Ÿé¦–é€‰
                        </span>
                        <h1 className="text-4xl md:text-5xl font-extrabold text-gray-900 mb-6 leading-tight">
                            é‡Œå°”ç•™å­¦ï¼Œ<span className="gradient-text">ä»è¿™é‡Œå®‰å®¶</span>
                        </h1>
                        <p className="text-gray-600 text-lg md:text-xl mb-8 max-w-2xl mx-auto">
                            ä¸æ­¢æ˜¯ç§Ÿæˆ¿ï¼Œæˆ‘ä»¬ä¸ºä½ æ•´ç†äº† 2026 æœ€æ–°ç•™å­¦ç”Ÿå­˜æŒ‡å—ã€‚
                            <br className="hidden md:block"/>
                            ä»æ±‡æ¬¾çœé’±åˆ°è½åœ°åŠå¡ï¼Œè€å­¦é•¿äº²æµ‹é¿å‘ã€‚
                        </p>
                        
                        <div className="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onClick={() => setActiveTab('rentals')} className="px-8 py-3.5 rounded-full bg-blue-600 text-white font-bold shadow-lg hover:bg-blue-700 transition-all hover:-translate-y-1">
                                ğŸ  æµè§ˆæˆ¿æº
                            </button>
                            <a href="landlord.html" target="_blank" className="px-8 py-3.5 rounded-full bg-blue-50 text-blue-700 border border-blue-200 font-bold shadow-md hover:bg-blue-100 transition-all flex items-center justify-center gap-2">
                                ğŸ”‘ æˆ¿ä¸œå…¥é©» / å‘å¸ƒæˆ¿æº
                            </a>
                            <button onClick={() => setActiveTab('welfare')} className="px-8 py-3.5 rounded-full bg-white text-gray-800 font-bold shadow-md border border-gray-100 hover:bg-gray-50 transition-all flex items-center justify-center gap-2">
                                ğŸ æ–°ç”Ÿç¦åˆ©åŒ… <span className="bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full animate-pulse">Hot</span>
                            </button>
                        </div>
                    </div>
                </div>

                {/* ç²¾é€‰ç¦åˆ© (åªæ˜¾ç¤ºå‰3ä¸ª) */}
                <div className="max-w-6xl mx-auto px-4 py-12">
                    <div className="flex items-center justify-between mb-8">
                        <div className="flex items-center gap-2">
                            <LucideIcon name="gift" size={24} className="text-red-500" />
                            <h2 className="text-2xl font-bold text-gray-800">æ–°ç”Ÿä¸“å±ç¦åˆ©</h2>
                        </div>
                        <button onClick={() => setActiveTab('welfare')} className="text-blue-600 font-medium hover:underline text-sm">æŸ¥çœ‹å…¨éƒ¨ &gt;</button>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {WELFARE_DATA.slice(0, 3).map((item, idx) => (
                            <WelfareCard key={idx} iconName={item.icon} {...item} onAction={openQR} />
                        ))}
                    </div>
                </div>

                {/* ç²¾é€‰æˆ¿æº (åªæ˜¾ç¤ºå‰4ä¸ª) */}
                <div className="bg-white py-12 border-t border-gray-100">
                    <div className="max-w-6xl mx-auto px-4">
                        <div className="flex justify-between items-end mb-8">
                            <div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">ç²¾é€‰ä¼˜è´¨æˆ¿æº</h2>
                                <p className="text-gray-500">æ‰€è§å³æ‰€å¾—ï¼Œæ”¯æŒè§†é¢‘çœ‹æˆ¿ï¼Œæ­£è§„ä½æˆ¿åˆåŒ</p>
                            </div>
                            <button onClick={() => setActiveTab('rentals')} className="text-blue-600 font-medium hover:underline hidden md:block">æŸ¥çœ‹å…¨éƒ¨ &gt;</button>
                        </div>
                        {rentalLoading ? (
                            <div className="text-center py-16 text-gray-500">æ­£åœ¨ä»æ•°æ®åº“åŠ è½½æˆ¿æºâ€¦</div>
                        ) : rentalError ? (
                            <div className="text-center py-16 text-red-600">
                                æˆ¿æºåŠ è½½å¤±è´¥ï¼š{rentalError}
                                <div className="text-gray-500 text-sm mt-2">
                                    è¯·ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼š<span className="font-mono">http://127.0.0.1:3001/api/v1/health</span>
                                </div>
                            </div>
                        ) : rentalData.length > 0 ? (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                {rentalData.slice(0, 4).map((item) => (
                                    <RentalCard key={item.id} {...item} />
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-16 text-gray-500">
                                æš‚æ— æˆ¿æºæ•°æ®ã€‚æˆ¿ä¸œå¯åœ¨ <a className="text-blue-600 hover:underline" href="landlord.html" target="_blank">æˆ¿ä¸œå·¥ä½œå°</a> å‘å¸ƒæˆ¿æºã€‚
                            </div>
                        )}
                    </div>
                </div>

                {/* è¡Œå‰æ¸…å• */}
                <div className="max-w-4xl mx-auto px-4 py-12">
                    <div className="bg-gradient-to-br from-gray-50 to-blue-50 rounded-3xl p-8 border border-blue-100">
                        <div className="flex items-center gap-3 mb-6">
                            <LucideIcon name="shield-check" size={28} className="text-blue-600" />
                            <h2 className="text-2xl font-bold text-gray-800">2026 å…¥å¢ƒé‡Œå°”Â·é˜²é—æ¼æ¸…å•</h2>
                        </div>
                        <p className="text-gray-600 mb-6">å‡ºå‘å‰æ£€æŸ¥ä¸€éï¼Œé¿å…åˆ°äº†æ³•å›½æ‰‹å¿™è„šä¹±ã€‚</p>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <ChecklistItem text="æŠ¤ç…§åŸä»¶ + ç­¾è¯é¡µå¤å°ä»¶ (å¤šå¤‡å‡ ä»½)" />
                            <ChecklistItem text="å­¦æ ¡å½•å–é€šçŸ¥ä¹¦ (Offer) & ä½æˆ¿è¯æ˜" />
                            <ChecklistItem text="å‡ºç”Ÿå…¬è¯åŒè®¤è¯ (CAFæˆ¿è¡¥å¿…å¤‡)" />
                            <ChecklistItem text="å°‘é‡æ¬§å…ƒç°é‡‘ (200-500æ¬§)" />
                            <ChecklistItem text="åŠç†å¥½çš„æ¬§æ´²ç”µè¯å¡ (æ¨è Giffgaff)" />
                            <ChecklistItem text="ä¸‡èƒ½è½¬æ¢æ’å¤´ (æ¬§æ ‡) + æ’æ’" />
                            <ChecklistItem text="å¸¸ç”¨è¯ (æ„Ÿå†’ã€æ¶ˆç‚ã€è‚ èƒƒ)" />
                            <ChecklistItem text="å·²ä¸‹è½½å¥½ Google Maps å’Œ ç†ŠçŒ«é€Ÿæ±‡App" />
                        </div>
                    </div>
                </div>
            </>
        );

        const WelfareView = ({ openQR }) => (
            <div className="pt-24 pb-12 max-w-6xl mx-auto px-4">
                <div className="text-center mb-12">
                    <h1 className="text-3xl font-bold text-gray-900 mb-4">ğŸ‡«ğŸ‡· ç•™å­¦ç”Ÿè–…ç¾Šæ¯›å¤§å…¨</h1>
                    <p className="text-gray-600 max-w-2xl mx-auto">
                        è¿™äº›ç¦åˆ©éƒ½æ˜¯æˆ¿ä¸œå’Œè€å­¦é•¿äº²æµ‹å¥½ç”¨çš„ã€‚å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥æ³•å›½ï¼Œå…ˆæŠŠä¸‹é¢è¿™äº›å…è´¹çš„ã€çœé’±çš„éƒ½é¢†ä¸€éï¼Œèƒ½çœä¸‹å¥½å‡ ç™¾æ¬§ï¼
                    </p>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {WELFARE_DATA.map((item, idx) => (
                        <WelfareCard key={idx} iconName={item.icon} {...item} onAction={openQR} />
                    ))}
                </div>
                <div className="mt-12 bg-blue-50 rounded-2xl p-6 text-center border border-blue-100">
                    <h3 className="font-bold text-blue-800 mb-2">ğŸ’¡ æ›´å¤šç¦åˆ©æŒç»­æ›´æ–°ä¸­...</h3>
                    <p className="text-blue-600 text-sm">æˆ‘ä»¬ä¼šå®šæœŸåœ¨ç¾¤é‡Œåˆ†äº«é‡Œå°”æœ¬åœ°çš„æŠ˜æ‰£ä¿¡æ¯ï¼ˆå¦‚è¶…å¸‚æ‰“æŠ˜ã€äºŒæ‰‹é›†å¸‚ï¼‰ã€‚</p>
                </div>
            </div>
        );

        const GuideView = () => (
            <div className="pt-24 pb-12 max-w-4xl mx-auto px-4">
                <div className="text-center mb-12">
                    <h1 className="text-3xl font-bold text-gray-900 mb-4">ğŸ“˜ é‡Œå°”ç”Ÿå­˜é¿å‘æŒ‡å— (2026ç‰ˆ)</h1>
                    <p className="text-gray-600">
                        æ³•å›½åŠäº‹æ•ˆç‡æ‡‚å¾—éƒ½æ‡‚ã€‚è¿™é‡Œæœ‰ä¸€ä»½ä¿å§†çº§æ”»ç•¥ï¼Œå¸®ä½ æå®šæœ€å¤´ç–¼çš„è¡Œæ”¿æ‰‹ç»­ã€‚
                    </p>
                </div>
                <div className="space-y-6">
                    {GUIDE_DATA.map((item, idx) => (
                        <GuideCard key={idx} {...item} />
                    ))}
                </div>
            </div>
        );

        const RentalsView = ({ openQR, rentalData, rentalLoading, rentalError }) => {
            const [filterLoc, setFilterLoc] = useState('All');
            const locations = ['All', ...new Set(rentalData.map(i => i.location))];

            const filteredData = filterLoc === 'All' 
                ? rentalData 
                : rentalData.filter(i => i.location === filterLoc);

            return (
                <div className="pt-24 pb-12 max-w-6xl mx-auto px-4">
                    <div className="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">å…¨éƒ¨æˆ¿æº</h1>
                            <p className="text-gray-600">æ‰¾åˆ°ä½ åœ¨é‡Œå°”çš„ç¬¬äºŒä¸ªå®¶</p>
                        </div>
                        {/* ç®€å•çš„ç­›é€‰å™¨ */}
                        <div className="flex gap-2 overflow-x-auto pb-2 md:pb-0 w-full md:w-auto no-scrollbar">
                            {locations.map(loc => (
                                <button
                                    key={loc}
                                    onClick={() => setFilterLoc(loc)}
                                    className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${
                                        filterLoc === loc 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-white border border-gray-200 text-gray-600 hover:bg-gray-50'
                                    }`}
                                >
                                    {loc === 'All' ? 'å…¨éƒ¨åŒºåŸŸ' : loc}
                                </button>
                            ))}
                        </div>
                    </div>

                    {rentalLoading ? (
                        <div className="text-center py-20 text-gray-500">
                            æ­£åœ¨ä»æ•°æ®åº“åŠ è½½æˆ¿æºâ€¦
                        </div>
                    ) : rentalError ? (
                        <div className="text-center py-20 text-red-600">
                            æˆ¿æºåŠ è½½å¤±è´¥ï¼š{rentalError}
                            <div className="text-gray-500 text-sm mt-2">
                                è¯·ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼š<span className="font-mono">http://127.0.0.1:3001/api/v1/health</span>
                            </div>
                        </div>
                    ) : filteredData.length > 0 ? (
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            {filteredData.map((item) => (
                                <RentalCard key={item.id} {...item} />
                            ))}
                        </div>
                    ) : (
                        <div className="text-center py-20 text-gray-500">
                            è¯¥åŒºåŸŸæš‚æ— æˆ¿æºï¼Œè¯•è¯•å…¶ä»–åŒºåŸŸï¼Ÿ
                        </div>
                    )}
                </div>
            );
        };

        // --- ä¸»ç¨‹åºå…¥å£ ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [showQR, setShowQR] = useState(false);
            const [rentalData, setRentalData] = useState(RENTAL_DATA);
            const [rentalLoading, setRentalLoading] = useState(true);
            const [rentalError, setRentalError] = useState('');

            // åˆ‡æ¢ Tab æ—¶æ»šåŠ¨åˆ°é¡¶éƒ¨
            useEffect(() => {
                window.scrollTo(0, 0);
                setIsMenuOpen(false);
            }, [activeTab]);

            const openQR = () => setShowQR(true);

            // åŠ¨æ€æ‹‰å–æˆ¿æºï¼šåªä½¿ç”¨ MongoDB ä¸­æˆ¿ä¸œå‘å¸ƒçš„æ•°æ®ï¼ˆä¸æä¾›ä»»ä½•â€œæ¼”ç¤ºå‡æˆ¿æºæ•°æ®â€å›é€€ï¼‰
            useEffect(() => {
                const controller = new AbortController();
                const t = setTimeout(() => controller.abort(), 3000);

                setRentalLoading(true);
                setRentalError('');

                const normalizeImage = (img) => {
                    if (!img) return null;
                    const s = String(img);
                    // å…¼å®¹ /uploads/xxxï¼ˆåç«¯é™æ€ç›®å½•ï¼‰
                    if (s.startsWith('/')) return `http://127.0.0.1:3001${s}`;
                    // å…¼å®¹å®Œæ•´ URL
                    if (s.startsWith('http://') || s.startsWith('https://')) return s;
                    // å…¼å®¹ uploads/xxx
                    if (s.startsWith('uploads/')) return `http://127.0.0.1:3001/${s}`;
                    return s;
                };

                const normalizeListing = (l) => ({
                    id: l._id || l.id,
                    image: normalizeImage(Array.isArray(l.images) ? l.images[0] : null),
                    title: l.title || "æœªå‘½åæˆ¿æº",
                    price: Number(l.price) || 0,
                    location: l.location || "Lille",
                    tags: Array.isArray(l.tags) ? l.tags : []
                });

                (async () => {
                    try {
                        const res = await fetch(`${API_BASE}/listings`, { signal: controller.signal });
                        if (!res.ok) throw new Error(`HTTP ${res.status}`);
                        const json = await res.json();
                        const listings = json?.data?.listings || [];
                        if (!Array.isArray(listings)) throw new Error('Invalid response');
                        setRentalData(listings.map(normalizeListing));
                    } catch (e) {
                        setRentalError(e?.message || 'Failed to fetch');
                    } finally {
                        clearTimeout(t);
                        setRentalLoading(false);
                    }
                })();

                return () => {
                    clearTimeout(t);
                    controller.abort();
                };
            }, []);

            const renderContent = () => {
                switch(activeTab) {
                    case 'home': return <HomeView setActiveTab={setActiveTab} openQR={openQR} rentalData={rentalData} rentalLoading={rentalLoading} rentalError={rentalError} />;
                    case 'welfare': return <WelfareView openQR={openQR} />;
                    case 'guide': return <GuideView />;
                    case 'rentals': return <RentalsView openQR={openQR} rentalData={rentalData} rentalLoading={rentalLoading} rentalError={rentalError} />;
                    default: return <HomeView setActiveTab={setActiveTab} openQR={openQR} rentalData={rentalData} rentalLoading={rentalLoading} rentalError={rentalError} />;
                }
            };

            return (
                <div className="min-h-screen pb-20 bg-[#F3F4F6]">
                    <Navbar 
                        activeTab={activeTab} 
                        setActiveTab={setActiveTab} 
                        toggleMenu={() => setIsMenuOpen(!isMenuOpen)} 
                        isMenuOpen={isMenuOpen} 
                    />

                    {renderContent()}

                    {/* ç§»åŠ¨ç«¯å¤‡æ¡ˆå· (æ”¾åœ¨æ–‡æ¡£æµåº•éƒ¨ï¼Œä¸ºäº†ä¸è¢«æ‚¬æµ®CTAé®æŒ¡ï¼ŒåŠ äº†ä¸‹è¾¹è·) */}
                    <div className="md:hidden text-center py-6 text-gray-400 text-xs pb-28">
                        <a href="https://beian.miit.gov.cn/" target="_blank">è¾½ICPå¤‡2024036757å·-1</a>
                    </div>

                    {/* åº•éƒ¨ CTA (æ‰€æœ‰é¡µé¢å¸¸é©»ï¼Œé™¤äº† Rentals é¡µé¢å¯èƒ½ä¸éœ€è¦å› ä¸ºå·²ç»æœ‰å¾ˆå¤šè”ç³»æŒ‰é’®äº†ï¼Ÿè¿˜æ˜¯ä¿ç•™å¢åŠ è½¬åŒ–å§) */}
                    <div className="fixed bottom-0 w-full bg-white/95 backdrop-blur border-t border-gray-200 p-4 z-40 md:static md:bg-gray-800 md:text-white md:border-none md:py-12 mt-auto">
                        <div className="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
                            <div className="text-center md:text-left">
                                <h3 className="text-lg font-bold text-gray-900 md:text-white mb-1">è¿˜æ²¡æœ‰æ‰¾åˆ°æ»¡æ„çš„æˆ¿å­ï¼Ÿ</h3>
                                <p className="text-sm text-gray-500 md:text-gray-400">åŠ å…¥ã€Œ2026é‡Œå°”æ–°ç”Ÿäº’åŠ©ç¾¤ã€ï¼Œæˆ¿ä¸œåœ¨çº¿ç­”ç–‘ã€‚</p>
                            </div>
                            <div className="flex gap-3 w-full md:w-auto">
                                <a href="landlord.html" target="_blank" className="flex-1 md:flex-none bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-3 px-6 rounded-xl shadow-sm flex items-center justify-center gap-2 transition-transform active:scale-95 whitespace-nowrap">
                                    <LucideIcon name="key" size={20} className="text-blue-700" />
                                    æˆ¿ä¸œå…¥é©»
                                </a>
                                <a href="/tenant" className="flex-1 md:flex-none bg-white hover:bg-gray-50 text-gray-800 font-bold py-3 px-6 rounded-xl shadow-sm border border-gray-200 flex items-center justify-center gap-2 transition-transform active:scale-95 whitespace-nowrap">
                                    <LucideIcon name="clipboard-edit" size={20} className="text-gray-700" />
                                    å‘å¸ƒæ±‚ç§Ÿ
                                </a>
                                <button onClick={openQR} className="flex-1 md:flex-none bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-transform active:scale-95 whitespace-nowrap">
                                <LucideIcon name="message-circle" size={20} className="text-white" />
                                    åŠ å¾®ä¿¡è¿›ç¾¤
                            </button>
                            </div>
                        </div>
                        
                        {/* PC ç«¯å¤‡æ¡ˆå· (æ•´åˆåœ¨ Footer å†…éƒ¨) */}
                        <div className="hidden md:block text-center mt-8 pt-8 border-t border-gray-700 text-gray-500 text-xs">
                             <a href="https://beian.miit.gov.cn/" target="_blank" className="hover:text-gray-300 transition-colors">è¾½ICPå¤‡2024036757å·-1</a>
                        </div>
                    </div>

                    {/* äºŒç»´ç å¼¹çª— */}
                    <WeChatModal isOpen={showQR} onClose={() => setShowQR(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
        // å›¾æ ‡ç”± LucideIcon ç»„ä»¶æŒ‰éœ€ç”Ÿæˆ SVGï¼Œè¿™é‡Œæ— éœ€å…¨å±€ createIcons()
    </script>
</body>
</html>

